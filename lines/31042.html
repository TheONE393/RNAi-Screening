<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>RNAi Line 31042</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="../style.css">
  <link href="https://cdn.jsdelivr.net/npm/glightbox/dist/css/glightbox.min.css" rel="stylesheet">
</head>
<body>

<button class="dark-toggle" onclick="toggleDarkMode()">🌙 Toggle Dark Mode</button>
<button class="menu-toggle" onclick="toggleSidebar()">☰</button>

<div class="sidebar" id="sidebar">
  <h3>All Lines</h3>
  <button onclick="syncFromRender()" class="sync-button">🔁 Sync Uploads</button>
  <div class="search-box">
    <input type="text" id="sidebarSearch" placeholder="Search...">
  </div>
  <div class="sidebar-grid" id="sidebarLinks">
    <a href="31042.html" class="sidebar-link active-link" id="activeLink"><span class="line-name">31042</span></a>

  </div>
</div>

<div class="content">
  <h1 class="page-title">RNAi Line 31042</h1>
  <p style="text-align:center; color:#666;">Notes and images for line 31042.</p>

  <div class="upload-box">
    <form action="http://127.0.0.1:5000/" method="post" enctype="multipart/form-data" target="_blank">
      <input type="text" name="line_name" value="31042" hidden>
      <input type="file" name="file" multiple required>
      <button type="submit">📤 Upload Images to 31042</button>
    </form>
  </div>

  <div class="image-gallery">
    
  </div>
</div>

<a href="../index.html" class="go-index">🏠 Index</a>

<script src="https://cdn.jsdelivr.net/npm/glightbox/dist/js/glightbox.min.js"></script>
<script>
  function toggleSidebar() {
    document.getElementById("sidebar").classList.toggle("open");
  }

  window.onload = function() {
    const active = document.getElementById("activeLink");
    if (active) {
      active.scrollIntoView({ block: "center", behavior: "smooth" });
    }
  };

  const sidebarInput = document.getElementById('sidebarSearch');
  const sidebarLinks = document.getElementById('sidebarLinks');
  sidebarInput.addEventListener('input', () => {
    const term = sidebarInput.value.toLowerCase();
    const links = sidebarLinks.querySelectorAll('a');
    links.forEach(link => {
      link.style.display = link.textContent.toLowerCase().includes(term) ? '' : 'none';
    });
  });

  const lightbox = GLightbox({
    selector: '.glightbox'
  });
</script>

<script>
  function toggleDarkMode() {
    document.body.classList.toggle('dark-mode');
    localStorage.setItem('theme', document.body.classList.contains('dark-mode') ? 'dark' : 'light');
  }

  window.addEventListener('DOMContentLoaded', () => {
    const savedTheme = localStorage.getItem('theme');
    if (savedTheme === 'dark') {
      document.body.classList.add('dark-mode');
    }
  });
</script>

<script>
function syncFromRender() {
    fetch("sync_from_upload_server.bat")
        .then(() => alert("✅ Sync started!"))
        .catch(() => alert("❌ Sync failed. Check console."));
}
</script>

</body>
</html>
